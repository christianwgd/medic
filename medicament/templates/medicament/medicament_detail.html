{% extends "base.html" %}
{% load i18n static django_bootstrap5 usrprofile_tags %}

{% block bootstrap5_extra_script %}
{{ block.super }}
<script src="{% static 'js/jquery.bootstrap.modal.forms.min.js' %}"></script>
<script type="text/javascript">
$(document).ready(function() {

    $("#id_edit").modalForm({
        formURL: "{% url 'medicament:update' medicament.id %}",
        modalID: "#modal",
        errorClass: '.is-invalid'
    });

    $("#id_delete").modalForm({
        formURL: "{% url 'medicament:delete' medicament.id %}",
        modalID: "#modal",
        errorClass: '.is-invalid'
    });

    $("#id_stock_change").modalForm({
        formURL: "{% url 'medicament:stock-change' medicament.id %}",
        modalID: "#modal",
        errorClass: '.is-invalid'
    });

});
</script>
{% endblock %}

{% block page_title %}{% endblock %}

{% block content %}
{% user_header medicament request.user %}

<div class="row mt-3">
    <div class="col-12">
        <table id="med" class="table table-bordered">
            <tbody>
                <tr>
                    <th class="label">{% trans 'Medicament' %}</th>
                    <td>{{ medicament.name }}</td>
                </tr>
                <tr>
                    <th>{% trans 'Active ingredient' %}</th>
                    <td>{{ medicament.ingredient }}</td>
                </tr>
                <tr>
                    <th>{% trans 'Package size' %}</th>
                    <td>{{ medicament.package }} {% trans 'Tabl.' %}</td>
                </tr>
                <tr>
                    <th>{% trans 'Dose' %}</th>
                    <td>{{ medicament.strength|floatformat:2 }} {{ medicament.unit }}</td>
                </tr>
                <tr>
                    <th>{% trans 'Stock' %}</th>
                    <td>{{ medicament.stock|floatformat:2 }} {% trans 'Tabl.' %}</td>
                </tr>
            </tbody>
        </table>
    </div>
</div>

<div class="row">
    <div class="col text-end">
        <button id="id_stock_change" type="button" class="btn btn-sm btn-secondary">
            <i class="far fa-exchange"></i>
            {% trans 'Stock change' %}
        </button>
        <a href="{% url 'medicament:stock-history' object.id %}" class="btn btn-sm btn-secondary">
            <i class="far fa-history"></i>
            {% trans 'Stock changes history' %}
        </a>
    </div>
</div>

<div class="row mt-3">
    <div class="col-4">
        <button id="id_delete" type="button" class="btn btn-danger"
                data-url="{% url 'medicament:delete' object.id %}">
            {% trans 'Delete' %}
        </button>
    </div>
    <div class="col-8 text-end">
        <button id="id_edit" type="button" class="btn btn-primary">
            {% trans 'Edit' %}
        </button>
        <a href="{% url 'medicament:list' %}" class="btn btn-secondary">
            {% trans 'Back' %}
        </a>
    </div>
</div>

{% endblock %}

